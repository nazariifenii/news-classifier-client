(this["webpackJsonpnews-classifier-client"]=this["webpackJsonpnews-classifier-client"]||[]).push([[0],{126:function(e,t,s){},144:function(e,t,s){},146:function(e,t,s){"use strict";s.r(t);var a,c=s(1),n=s(0),r=s.n(n),i=s(12),o=s.n(i),l=s(15),d=s(14),j=s(59),m=new(s(176).a)(null),u="".concat(j.apiUrl,"/accounts"),b={login:function(e,t){return C.post("".concat(u,"/authenticate"),{email:e,password:t}).then((function(e){return m.next(e),p(),e}))},logout:h,refreshToken:f,register:function(e){return C.post("".concat(u,"/register"),e)},verifyEmail:function(e){return C.post("".concat(u,"/verify-email"),{token:e})},forgotPassword:function(e){return C.post("".concat(u,"/forgot-password"),{email:e})},validateResetToken:function(e){return C.post("".concat(u,"/validate-reset-token"),{token:e})},resetPassword:function(e){var t=e.token,s=e.password,a=e.confirmPassword;return C.post("".concat(u,"/reset-password"),{token:t,password:s,confirmPassword:a})},getAll:function(){return C.get(u)},getById:function(e){return C.get("".concat(u,"/").concat(e))},create:function(e){return C.post(u,e)},update:function(e,t){return C.put("".concat(u,"/").concat(e),t).then((function(e){return e.id===m.value.id&&(e=Object(d.a)(Object(d.a)({},m.value),e),m.next(e)),e}))},delete:function(e){return C.delete("".concat(u,"/").concat(e)).then((function(t){return e===m.value.id&&h(),t}))},user:m.asObservable(),get userValue(){return m.value}};function h(){C.post("".concat(u,"/revoke-token"),{}),clearTimeout(a),m.next(null),M.push("/account/login")}function f(){return C.post("".concat(u,"/refresh-token"),{}).then((function(e){return m.next(e),p(),e}))}function p(){var e=JSON.parse(atob(m.value.jwtToken.split(".")[1])),t=new Date(1e3*e.exp).getTime()-Date.now()-6e4;a=setTimeout(f,t)}var O=s(112),x=s(177),v=new O.a,N="default-alert",w={onAlert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;return v.asObservable().pipe(Object(x.a)((function(t){return t&&t.id===e})))},success:function(e,t){q(Object(d.a)(Object(d.a)({},t),{},{type:g,message:e}))},error:function(e,t){q(Object(d.a)(Object(d.a)({},t),{},{type:y,message:e}))},info:function(e,t){q(Object(d.a)(Object(d.a)({},t),{},{type:k,message:e}))},warn:function(e,t){q(Object(d.a)(Object(d.a)({},t),{},{type:P,message:e}))},alert:q,clear:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;v.next({id:e})}},g="Success",y="Error",k="Info",P="Warning";function q(e){e.id=e.id||N,e.autoClose=void 0===e.autoClose||e.autoClose,v.next(e)}var S="".concat(j.apiUrl,"/classificator"),T={processText:function(e){return C.put("".concat(S,"/process-text"),{text:e}).then((function(e){return w.success("Text processing success"),e}))}};var C={get:function(e){var t={method:"GET",headers:E(e)};return fetch(e,t).then(V)},post:function(e,t){var s={method:"POST",headers:Object(d.a)({"Content-Type":"application/json"},E(e)),credentials:"include",body:JSON.stringify(t)};return fetch(e,s).then(V)},put:function(e,t){var s={method:"PUT",headers:Object(d.a)({"Content-Type":"application/json"},E(e)),body:JSON.stringify(t)};return fetch(e,s).then(V)},delete:function(e){var t={method:"DELETE",headers:E(e)};return fetch(e,t).then(V)}};function E(e){var t=b.userValue,s=t&&t.jwtToken,a=e.startsWith(j.apiUrl);return s&&a?{Authorization:"Bearer ".concat(t.jwtToken)}:{}}function V(e){return e.text().then((function(t){var s=t&&JSON.parse(t);if(!e.ok){[401,403].includes(e.status)&&b.userValue&&b.logout();var a=s&&s.message||e.statusText;return Promise.reject(a)}return s}))}var A=s(27),M=Object(A.a)(),R="Admin",U=(s(126),s(23)),L=s(57),F=s(113);function D(e){var t=e.id,s=e.fade,a=Object(n.useState)([]),r=Object(U.a)(a,2),i=r[0],o=r[1];function l(e){if(s){var t=Object(d.a)(Object(d.a)({},e),{},{fade:!0});o((function(s){return s.map((function(s){return s===e?t:s}))})),setTimeout((function(){o((function(e){return e.filter((function(e){return e!==t}))}))}),250)}else o((function(t){return t.filter((function(t){return t!==e}))}))}function j(e){var t;if(e){var s=["alert","alert-dismissable"],a=(t={},Object(L.a)(t,g,"alert alert-success"),Object(L.a)(t,y,"alert alert-danger"),Object(L.a)(t,k,"alert alert-info"),Object(L.a)(t,P,"alert alert-warning"),t);return s.push(a[e.type]),e.fade&&s.push("fade"),s.join(" ")}}return Object(n.useEffect)((function(){var e=w.onAlert(t).subscribe((function(e){e.message?(o((function(t){return[].concat(Object(F.a)(t),[e])})),e.autoClose&&setTimeout((function(){return l(e)}),3e3)):o((function(e){var t=e.filter((function(e){return e.keepAfterRouteChange}));return t.forEach((function(e){return delete e.keepAfterRouteChange})),t}))})),s=M.listen((function(e){e.pathname.endsWith("/")||w.clear(t)}));return function(){e.unsubscribe(),s()}}),[]),i.length?Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{className:"m-3",children:i.map((function(e,t){return Object(c.jsxs)("div",{className:j(e),children:[Object(c.jsx)("a",{className:"close",onClick:function(){return l(e)},children:"\xd7"}),Object(c.jsx)("span",{dangerouslySetInnerHTML:{__html:e.message}})]},t)}))})}):null}D.defaultProps={id:"default-alert",fade:!0};var J=s(9);function I(){var e=Object(n.useState)({}),t=Object(U.a)(e,2),s=t[0],a=t[1];return Object(n.useEffect)((function(){return b.user.subscribe((function(e){return a(e)})).unsubscribe}),[]),s?Object(c.jsxs)("div",{children:[Object(c.jsx)("nav",{className:"navbar navbar-expand navbar-dark bg-dark",children:Object(c.jsxs)("div",{className:"navbar-nav",children:[Object(c.jsx)(J.b,{exact:!0,to:"/",className:"nav-item nav-link",children:"\u0413\u043e\u043b\u043e\u0432\u043d\u0430"}),Object(c.jsx)(J.b,{to:"/classificator",className:"nav-item nav-link",children:"\u041a\u043b\u0430\u0441\u0438\u0444\u0456\u043a\u0430\u0446\u0456\u044f"}),Object(c.jsx)(J.b,{to:"/archive",className:"nav-item nav-link",children:"\u0410\u0440\u0445\u0456\u0432"}),s.role===R&&Object(c.jsx)(J.b,{to:"/admin",className:"nav-item nav-link",children:"\u0410\u0434\u043c\u0456\u043d\u0456\u0441\u0442\u0440\u0430\u0442\u043e\u0440"}),Object(c.jsx)("a",{onClick:b.logout,className:"nav-item nav-link",children:"\u0412\u0438\u0439\u0442\u0438"})]})}),Object(c.jsx)(l.b,{path:"/admin",component:W})]}):null}function W(e){var t=e.match.path;return Object(c.jsx)("nav",{className:"admin-nav navbar navbar-expand navbar-light",children:Object(c.jsx)("div",{className:"navbar-nav",children:Object(c.jsx)(J.b,{to:"".concat(t,"/users"),className:"nav-item nav-link",children:"Users"})})})}var B=s(114);function H(e){var t=e.component,s=e.roles,a=Object(B.a)(e,["component","roles"]);return Object(c.jsx)(l.b,Object(d.a)(Object(d.a)({},a),{},{render:function(e){var a=b.userValue;return a?s&&-1===s.indexOf(a.role)?Object(c.jsx)(l.a,{to:{pathname:"/"}}):Object(c.jsx)(t,Object(d.a)({},e)):Object(c.jsx)(l.a,{to:{pathname:"/account/login",state:{from:e.location}}})}}))}function _(){var e=b.userValue;return Object(c.jsx)("div",{className:"p-4",children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsxs)("h1",{children:["Hi ",e.firstName,"!"]}),Object(c.jsx)("p",{children:"You're logged in with React & JWT!!"})]})})}var z=s(5),G=s(6);function Y(e){var t=e.history,s=e.location,a=G.b().shape({email:G.d().email("Email is invalid").required("Email is required"),password:G.d().required("Password is required")});return Object(c.jsx)(z.d,{initialValues:{email:"",password:""},validationSchema:a,onSubmit:function(e,a){var c=e.email,n=e.password,r=a.setSubmitting;w.clear(),b.login(c,n).then((function(){var e=(s.state||{from:{pathname:"/"}}).from;t.push(e)})).catch((function(e){r(!1),w.error(e)}))},children:function(e){var t=e.errors,s=e.touched,a=e.isSubmitting;return Object(c.jsxs)(z.c,{children:[Object(c.jsx)("h3",{className:"card-header",children:"Login"}),Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Email"}),Object(c.jsx)(z.b,{name:"email",type:"text",className:"form-control"+(t.email&&s.email?" is-invalid":"")}),Object(c.jsx)(z.a,{name:"email",component:"div",className:"invalid-feedback"})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Password"}),Object(c.jsx)(z.b,{name:"password",type:"password",className:"form-control"+(t.password&&s.password?" is-invalid":"")}),Object(c.jsx)(z.a,{name:"password",component:"div",className:"invalid-feedback"})]}),Object(c.jsxs)("div",{className:"form-row",children:[Object(c.jsxs)("div",{className:"form-group col",children:[Object(c.jsxs)("button",{type:"submit",disabled:a,className:"btn btn-primary",children:[a&&Object(c.jsx)("span",{className:"spinner-border spinner-border-sm mr-1"}),"Login"]}),Object(c.jsx)(J.a,{to:"register",className:"btn btn-link",children:"Register"})]}),Object(c.jsx)("div",{className:"form-group col text-right",children:Object(c.jsx)(J.a,{to:"forgot-password",className:"btn btn-link pr-0",children:"Forgot Password?"})})]})]})]})}})}function K(e){var t=e.history,s=G.b().shape({title:G.d().required("Title is required"),firstName:G.d().required("First Name is required"),lastName:G.d().required("Last Name is required"),email:G.d().email("Email is invalid").required("Email is required"),password:G.d().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:G.d().oneOf([G.c("password"),null],"Passwords must match").required("Confirm Password is required"),acceptTerms:G.a().oneOf([!0],"Accept Terms & Conditions is required")});return Object(c.jsx)(z.d,{initialValues:{title:"",firstName:"",lastName:"",email:"",password:"",confirmPassword:"",acceptTerms:!1},validationSchema:s,onSubmit:function(e,s){var a=s.setStatus,c=s.setSubmitting;a(),b.register(e).then((function(){w.success("Registration successful, please check your email for verification instructions",{keepAfterRouteChange:!0}),t.push("login")})).catch((function(e){c(!1),w.error(e)}))},children:function(e){var t=e.errors,s=e.touched,a=e.isSubmitting;return Object(c.jsxs)(z.c,{children:[Object(c.jsx)("h3",{className:"card-header",children:"Register"}),Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsxs)("div",{className:"form-row",children:[Object(c.jsxs)("div",{className:"form-group col",children:[Object(c.jsx)("label",{children:"Title"}),Object(c.jsxs)(z.b,{name:"title",as:"select",className:"form-control"+(t.title&&s.title?" is-invalid":""),children:[Object(c.jsx)("option",{value:""}),Object(c.jsx)("option",{value:"Mr",children:"Mr"}),Object(c.jsx)("option",{value:"Mrs",children:"Mrs"}),Object(c.jsx)("option",{value:"Miss",children:"Miss"}),Object(c.jsx)("option",{value:"Ms",children:"Ms"})]}),Object(c.jsx)(z.a,{name:"title",component:"div",className:"invalid-feedback"})]}),Object(c.jsxs)("div",{className:"form-group col-5",children:[Object(c.jsx)("label",{children:"First Name"}),Object(c.jsx)(z.b,{name:"firstName",type:"text",className:"form-control"+(t.firstName&&s.firstName?" is-invalid":"")}),Object(c.jsx)(z.a,{name:"firstName",component:"div",className:"invalid-feedback"})]}),Object(c.jsxs)("div",{className:"form-group col-5",children:[Object(c.jsx)("label",{children:"Last Name"}),Object(c.jsx)(z.b,{name:"lastName",type:"text",className:"form-control"+(t.lastName&&s.lastName?" is-invalid":"")}),Object(c.jsx)(z.a,{name:"lastName",component:"div",className:"invalid-feedback"})]})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Email"}),Object(c.jsx)(z.b,{name:"email",type:"text",className:"form-control"+(t.email&&s.email?" is-invalid":"")}),Object(c.jsx)(z.a,{name:"email",component:"div",className:"invalid-feedback"})]}),Object(c.jsxs)("div",{className:"form-row",children:[Object(c.jsxs)("div",{className:"form-group col",children:[Object(c.jsx)("label",{children:"Password"}),Object(c.jsx)(z.b,{name:"password",type:"password",className:"form-control"+(t.password&&s.password?" is-invalid":"")}),Object(c.jsx)(z.a,{name:"password",component:"div",className:"invalid-feedback"})]}),Object(c.jsxs)("div",{className:"form-group col",children:[Object(c.jsx)("label",{children:"Confirm Password"}),Object(c.jsx)(z.b,{name:"confirmPassword",type:"password",className:"form-control"+(t.confirmPassword&&s.confirmPassword?" is-invalid":"")}),Object(c.jsx)(z.a,{name:"confirmPassword",component:"div",className:"invalid-feedback"})]})]}),Object(c.jsxs)("div",{className:"form-group form-check",children:[Object(c.jsx)(z.b,{type:"checkbox",name:"acceptTerms",id:"acceptTerms",className:"form-check-input "+(t.acceptTerms&&s.acceptTerms?" is-invalid":"")}),Object(c.jsx)("label",{htmlFor:"acceptTerms",className:"form-check-label",children:"Accept Terms & Conditions"}),Object(c.jsx)(z.a,{name:"acceptTerms",component:"div",className:"invalid-feedback"})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsxs)("button",{type:"submit",disabled:a,className:"btn btn-primary",children:[a&&Object(c.jsx)("span",{className:"spinner-border spinner-border-sm mr-1"}),"Register"]}),Object(c.jsx)(J.a,{to:"login",className:"btn btn-link",children:"Cancel"})]})]})]})}})}var Q=s(89),X=s.n(Q);function Z(e){var t=e.history,s=e.location,a="Verifying",r="Failed",i=Object(n.useState)(a),o=Object(U.a)(i,2),l=o[0],d=o[1];return Object(n.useEffect)((function(){var e=X.a.parse(s.search).token;t.replace(s.pathname),b.verifyEmail(e).then((function(){w.success("Verification successful, you can now login",{keepAfterRouteChange:!0}),t.push("login")})).catch((function(){d(r)}))}),[]),Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{className:"card-header",children:"Verify Email"}),Object(c.jsx)("div",{className:"card-body",children:function(){switch(l){case a:return Object(c.jsx)("div",{children:"Verifying..."});case r:return Object(c.jsxs)("div",{children:["Verification failed, you can also verify your account using the"," ",Object(c.jsx)(J.a,{to:"forgot-password",children:"forgot password"})," page."]})}}()})]})}function $(){var e=G.b().shape({email:G.d().email("Email is invalid").required("Email is required")});return Object(c.jsx)(z.d,{initialValues:{email:""},validationSchema:e,onSubmit:function(e,t){var s=e.email,a=t.setSubmitting;w.clear(),b.forgotPassword(s).then((function(){return w.success("Please check your email for password reset instructions")})).catch((function(e){return w.error(e)})).finally((function(){return a(!1)}))},children:function(e){var t=e.errors,s=e.touched,a=e.isSubmitting;return Object(c.jsxs)(z.c,{children:[Object(c.jsx)("h3",{className:"card-header",children:"Forgot Password"}),Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Email"}),Object(c.jsx)(z.b,{name:"email",type:"text",className:"form-control"+(t.email&&s.email?" is-invalid":"")}),Object(c.jsx)(z.a,{name:"email",component:"div",className:"invalid-feedback"})]}),Object(c.jsx)("div",{className:"form-row",children:Object(c.jsxs)("div",{className:"form-group col",children:[Object(c.jsxs)("button",{type:"submit",disabled:a,className:"btn btn-primary",children:[a&&Object(c.jsx)("span",{className:"spinner-border spinner-border-sm mr-1"}),"Submit"]}),Object(c.jsx)(J.a,{to:"login",className:"btn btn-link",children:"Cancel"})]})})]})]})}})}function ee(e){var t=e.history,s=e.location,a="Validating",r="Valid",i="Invalid",o=Object(n.useState)(null),l=Object(U.a)(o,2),d=l[0],j=l[1],m=Object(n.useState)(a),u=Object(U.a)(m,2),h=u[0],f=u[1];return Object(n.useEffect)((function(){var e=X.a.parse(s.search).token;t.replace(s.pathname),b.validateResetToken(e).then((function(){j(e),f(r)})).catch((function(){f(i)}))}),[]),Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{className:"card-header",children:"Reset Password"}),Object(c.jsx)("div",{className:"card-body",children:function(){switch(h){case r:return function(){var e=G.b().shape({password:G.d().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:G.d().oneOf([G.c("password"),null],"Passwords must match").required("Confirm Password is required")});return Object(c.jsx)(z.d,{initialValues:{password:"",confirmPassword:""},validationSchema:e,onSubmit:function(e,s){var a=e.password,c=e.confirmPassword,n=s.setSubmitting;w.clear(),b.resetPassword({token:d,password:a,confirmPassword:c}).then((function(){w.success("Password reset successful, you can now login",{keepAfterRouteChange:!0}),t.push("login")})).catch((function(e){n(!1),w.error(e)}))},children:function(e){var t=e.errors,s=e.touched,a=e.isSubmitting;return Object(c.jsxs)(z.c,{children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Password"}),Object(c.jsx)(z.b,{name:"password",type:"password",className:"form-control"+(t.password&&s.password?" is-invalid":"")}),Object(c.jsx)(z.a,{name:"password",component:"div",className:"invalid-feedback"})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Confirm Password"}),Object(c.jsx)(z.b,{name:"confirmPassword",type:"password",className:"form-control"+(t.confirmPassword&&s.confirmPassword?" is-invalid":"")}),Object(c.jsx)(z.a,{name:"confirmPassword",component:"div",className:"invalid-feedback"})]}),Object(c.jsx)("div",{className:"form-row",children:Object(c.jsxs)("div",{className:"form-group col",children:[Object(c.jsxs)("button",{type:"submit",disabled:a,className:"btn btn-primary",children:[a&&Object(c.jsx)("span",{className:"spinner-border spinner-border-sm mr-1"}),"Reset Password"]}),Object(c.jsx)(J.a,{to:"/login",className:"btn btn-link",children:"Cancel"})]})})]})}})}();case i:return Object(c.jsxs)("div",{children:["Token validation failed, if the token has expired you can get a new one at the ",Object(c.jsx)(J.a,{to:"forgot-password",children:"forgot password"})," page."]});case a:return Object(c.jsx)("div",{children:"Validating token..."})}}()})]})}function te(e){var t=e.history,s=e.match.path;return Object(n.useEffect)((function(){b.userValue&&t.push("/")}),[]),Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-sm-8 offset-sm-2 mt-5",children:Object(c.jsx)("div",{className:"card m-3",children:Object(c.jsxs)(l.d,{children:[Object(c.jsx)(l.b,{path:"".concat(s,"/login"),component:Y}),Object(c.jsx)(l.b,{path:"".concat(s,"/register"),component:K}),Object(c.jsx)(l.b,{path:"".concat(s,"/verify-email"),component:Z}),Object(c.jsx)(l.b,{path:"".concat(s,"/forgot-password"),component:$}),Object(c.jsx)(l.b,{path:"".concat(s,"/reset-password"),component:ee})]})})})})})}function se(e){var t=e.match.path,s=b.userValue;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"My Profile"}),Object(c.jsxs)("p",{children:[Object(c.jsx)("strong",{children:"Name: "})," ",s.title," ",s.firstName," ",s.lastName,Object(c.jsx)("br",{}),Object(c.jsx)("strong",{children:"Email: "})," ",s.email]}),Object(c.jsx)("p",{children:Object(c.jsx)(J.a,{to:"".concat(t,"/update"),children:"Update Profile"})})]})}function ae(e){var t=e.history,s=b.userValue,a={title:s.title,firstName:s.firstName,lastName:s.lastName,email:s.email,password:"",confirmPassword:""},r=G.b().shape({title:G.d().required("Title is required"),firstName:G.d().required("First Name is required"),lastName:G.d().required("Last Name is required"),email:G.d().email("Email is invalid").required("Email is required"),password:G.d().min(6,"Password must be at least 6 characters"),confirmPassword:G.d().when("password",(function(e,t){if(e)return t.required("Confirm Password is required")})).oneOf([G.c("password")],"Passwords must match")});var i=Object(n.useState)(!1),o=Object(U.a)(i,2),l=o[0];o[1];return Object(c.jsx)(z.d,{initialValues:a,validationSchema:r,onSubmit:function(e,a){var c=a.setStatus,n=a.setSubmitting;c(),b.update(s.id,e).then((function(){w.success("Update successful",{keepAfterRouteChange:!0}),t.push(".")})).catch((function(e){n(!1),w.error(e)}))},children:function(e){var t=e.errors,s=e.touched,a=e.isSubmitting;return Object(c.jsxs)(z.c,{children:[Object(c.jsx)("h1",{children:"Update Profile"}),Object(c.jsxs)("div",{className:"form-row",children:[Object(c.jsxs)("div",{className:"form-group col",children:[Object(c.jsx)("label",{children:"Title"}),Object(c.jsxs)(z.b,{name:"title",as:"select",className:"form-control"+(t.title&&s.title?" is-invalid":""),children:[Object(c.jsx)("option",{value:""}),Object(c.jsx)("option",{value:"Mr",children:"Mr"}),Object(c.jsx)("option",{value:"Mrs",children:"Mrs"}),Object(c.jsx)("option",{value:"Miss",children:"Miss"}),Object(c.jsx)("option",{value:"Ms",children:"Ms"})]}),Object(c.jsx)(z.a,{name:"title",component:"div",className:"invalid-feedback"})]}),Object(c.jsxs)("div",{className:"form-group col-5",children:[Object(c.jsx)("label",{children:"First Name"}),Object(c.jsx)(z.b,{name:"firstName",type:"text",className:"form-control"+(t.firstName&&s.firstName?" is-invalid":"")}),Object(c.jsx)(z.a,{name:"firstName",component:"div",className:"invalid-feedback"})]}),Object(c.jsxs)("div",{className:"form-group col-5",children:[Object(c.jsx)("label",{children:"Last Name"}),Object(c.jsx)(z.b,{name:"lastName",type:"text",className:"form-control"+(t.lastName&&s.lastName?" is-invalid":"")}),Object(c.jsx)(z.a,{name:"lastName",component:"div",className:"invalid-feedback"})]})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Email"}),Object(c.jsx)(z.b,{name:"email",type:"text",className:"form-control"+(t.email&&s.email?" is-invalid":"")}),Object(c.jsx)(z.a,{name:"email",component:"div",className:"invalid-feedback"})]}),Object(c.jsx)("h3",{className:"pt-3",children:"Change Password"}),Object(c.jsx)("p",{children:"Leave blank to keep the same password"}),Object(c.jsxs)("div",{className:"form-row",children:[Object(c.jsxs)("div",{className:"form-group col",children:[Object(c.jsx)("label",{children:"Password"}),Object(c.jsx)(z.b,{name:"password",type:"password",className:"form-control"+(t.password&&s.password?" is-invalid":"")}),Object(c.jsx)(z.a,{name:"password",component:"div",className:"invalid-feedback"})]}),Object(c.jsxs)("div",{className:"form-group col",children:[Object(c.jsx)("label",{children:"Confirm Password"}),Object(c.jsx)(z.b,{name:"confirmPassword",type:"password",className:"form-control"+(t.confirmPassword&&s.confirmPassword?" is-invalid":"")}),Object(c.jsx)(z.a,{name:"confirmPassword",component:"div",className:"invalid-feedback"})]})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsxs)("button",{type:"submit",disabled:a,className:"btn btn-primary mr-2",children:[a&&Object(c.jsx)("span",{className:"spinner-border spinner-border-sm mr-1"}),"Update"]}),Object(c.jsx)("button",{type:"button",onClick:function(){},className:"btn btn-danger",style:{width:"75px"},disabled:l,children:l?Object(c.jsx)("span",{className:"spinner-border spinner-border-sm"}):Object(c.jsx)("span",{children:"Delete"})}),Object(c.jsx)(J.a,{to:".",className:"btn btn-link",children:"Cancel"})]})]})}})}function ce(e){var t=e.match.path;return Object(c.jsx)("div",{className:"p-4",children:Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)(l.d,{children:[Object(c.jsx)(l.b,{exact:!0,path:t,component:se}),Object(c.jsx)(l.b,{path:"".concat(t,"/update"),component:ae})]})})})}function ne(e){var t=e.match.path;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Admin"}),Object(c.jsx)("p",{children:"This section can only be accessed by administrators."}),Object(c.jsx)("p",{children:Object(c.jsx)(J.a,{to:"".concat(t,"/users"),children:"Manage Users"})})]})}function re(e){var t=e.match.path,s=Object(n.useState)(null),a=Object(U.a)(s,2),r=a[0],i=a[1];return Object(n.useEffect)((function(){b.getAll().then((function(e){return i(e)}))}),[]),Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Users"}),Object(c.jsx)("p",{children:"All users from secure (admin only) api end point:"}),Object(c.jsx)(J.a,{to:"".concat(t,"/add"),className:"btn btn-sm btn-success mb-2",children:"Add User"}),Object(c.jsxs)("table",{className:"table table-striped",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{style:{width:"30%"},children:"Name"}),Object(c.jsx)("th",{style:{width:"30%"},children:"Email"}),Object(c.jsx)("th",{style:{width:"30%"},children:"Role"}),Object(c.jsx)("th",{style:{width:"10%"}})]})}),Object(c.jsxs)("tbody",{children:[r&&r.map((function(e){return Object(c.jsxs)("tr",{children:[Object(c.jsxs)("td",{children:[e.title," ",e.firstName," ",e.lastName]}),Object(c.jsx)("td",{children:e.email}),Object(c.jsx)("td",{children:e.role}),Object(c.jsxs)("td",{style:{whiteSpace:"nowrap"},children:[Object(c.jsx)(J.a,{to:"".concat(t,"/edit/").concat(e.id),className:"btn btn-sm btn-primary mr-1",children:"Edit"}),Object(c.jsx)("button",{onClick:function(){return t=e.id,i(r.map((function(e){return e.id===t&&(e.isDeleting=!0),e}))),void b.delete(t).then((function(){i((function(e){return e.filter((function(e){return e.id!==t}))}))}));var t},className:"btn btn-sm btn-danger",style:{width:"60px"},disabled:e.isDeleting,children:e.isDeleting?Object(c.jsx)("span",{className:"spinner-border spinner-border-sm"}):Object(c.jsx)("span",{children:"Delete"})})]})]},e.id)})),!r&&Object(c.jsx)("tr",{children:Object(c.jsx)("td",{colSpan:"4",className:"text-center",children:Object(c.jsx)("span",{className:"spinner-border spinner-border-lg align-center"})})})]})]})]})}function ie(e){var t=e.history,s=e.match.params.id,a=!s,n=G.b().shape({title:G.d().required("Title is required"),firstName:G.d().required("First Name is required"),lastName:G.d().required("Last Name is required"),email:G.d().email("Email is invalid").required("Email is required"),role:G.d().required("Role is required"),password:G.d().concat(a?G.d().required("Password is required"):null).min(6,"Password must be at least 6 characters"),confirmPassword:G.d().when("password",(function(e,t){if(e)return t.required("Confirm Password is required")})).oneOf([G.c("password")],"Passwords must match")});return Object(c.jsx)(z.d,{initialValues:{title:"",firstName:"",lastName:"",email:"",role:"",password:"",confirmPassword:""},validationSchema:n,onSubmit:function(e,c){var n=c.setStatus,r=c.setSubmitting;n(),a?function(e,s){b.create(e).then((function(){w.success("User added successfully",{keepAfterRouteChange:!0}),t.push(".")})).catch((function(e){s(!1),w.error(e)}))}(e,r):function(e,s,a){b.update(e,s).then((function(){w.success("Update successful",{keepAfterRouteChange:!0}),t.push("..")})).catch((function(e){a(!1),w.error(e)}))}(s,e,r)}})}function oe(e){var t=e.match.path;return Object(c.jsxs)(l.d,{children:[Object(c.jsx)(l.b,{exact:!0,path:t,component:re}),Object(c.jsx)(l.b,{path:"".concat(t,"/add"),component:ie}),Object(c.jsx)(l.b,{path:"".concat(t,"/edit/:id"),component:ie})]})}function le(e){var t=e.match.path;return Object(c.jsx)("div",{className:"p-4",children:Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)(l.d,{children:[Object(c.jsx)(l.b,{exact:!0,path:t,component:ne}),Object(c.jsx)(l.b,{path:"".concat(t,"/users"),component:oe})]})})})}var de=s(181),je=s(182);function me(){var e=Object(n.useState)(""),t=Object(U.a)(e,2),s=t[0],a=t[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"\u041a\u043b\u0430\u0441\u0438\u0444\u0456\u043a\u0430\u0442\u043e\u0440 \u043d\u043e\u0432\u0438\u043d"}),Object(c.jsx)(de.a,{onChange:function(e){return a(e.target.value)},id:"outlined-multiline-static",label:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u0442\u0435\u043a\u0441\u0442",multiline:!0,rows:6,fullWidth:!0,defaultValue:s,variant:"outlined"}),Object(c.jsx)(je.a,{color:"primary",onClick:function(){T.processText(s)},variant:"contained",children:"\u041a\u043b\u0430\u0441\u0438\u0444\u0456\u043a\u0443\u0432\u0430\u0442\u0438"})]})}s(144);var ue=function(){var e=Object(l.g)().pathname,t=Object(n.useState)({}),s=Object(U.a)(t,2),a=(s[0],s[1]);return Object(n.useEffect)((function(){return b.user.subscribe((function(e){return a(e)})).unsubscribe}),[]),Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(I,{}),Object(c.jsx)(D,{}),Object(c.jsxs)(l.d,{children:[Object(c.jsx)(l.a,{from:"/:url*(/+)",to:e.slice(0,-1)}),Object(c.jsx)(H,{exact:!0,path:"/",component:_}),Object(c.jsx)(H,{path:"/classificator",component:me}),Object(c.jsx)(H,{path:"/archive",component:ce}),Object(c.jsx)(H,{path:"/admin",roles:[R],component:le}),Object(c.jsx)(l.b,{path:"/account",component:te}),Object(c.jsx)(l.a,{from:"*",to:"/"})]})]})};s(145);o.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(l.c,{history:M,children:Object(c.jsx)(ue,{})})}),document.getElementById("root"))},59:function(e){e.exports=JSON.parse('{"apiUrl":"https://news-classifier-server.herokuapp.com","apiUrlProduction":"https://news-classifier-server.herokuapp.com"}')}},[[146,1,2]]]);
//# sourceMappingURL=main.850ee485.chunk.js.map